<?xml version='1.0' encoding='UTF-8'?>

<bag xmlns:boolean="http://www.w3.org/2001/XMLSchema#boolean" xmlns:exsl="http://exslt.org/common" xmlns:int="http://www.w3.org/2001/XMLSchema#int" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <internal name="%SNBBandwidthViewpointName" description="%SNBBandwidthViewpointDescription" shortName="%SNBBandwidthViewpointShortName">
  <int:schemaVersion>1</int:schemaVersion>
  <int:contentVersion>15</int:contentVersion>
 </internal>
 <viewpoint xsl:version="1.0" exsl:keep_exsl_namespace="">
  <requiredData>
   <queryRef>/OvertimeBandwidth</queryRef>
  </requiredData>
  <pane id="bottomUpPane" placeId="bottomArea"/>
  <pane id="summaryPane" placeId="resultsArea"/>
  <pane id="quickFilterPane" placeId="filterArea"/>
  <pane id="timelinePane" placeId="resultsArea"/>
  <displayLayout>
   <tab id="summary">
    <masterPane id="summaryPane"/>
   </tab>
   <tab id="bottomUp">
    <paneToShow id="timelinePane"/>
    <masterPane id="bottomUpPane"/>
    <paneToShow id="quickFilterPane"/>
   </tab>
   <defaultTab id="summary"/>
  </displayLayout>
  <diveLayout id="srcAsmPane" placeId="resultsArea"/>
 </viewpoint>
 <paneLibrary xsl:version="1.0" exsl:keep_exsl_namespace="">
  <xsl:variable name="stripchartpanes" select="document('config://viewpoint/include/stripchartpanes.cfg')"/>
  <quickFilter id="quickFilterPane" displayName="%FilterBar">
   <section filterToUse="global" boolean:includeAll="true">
    <filterBy>
     <queryRef>/Process/Thread/PMUModule</queryRef>
    </filterBy>
   </section>
   <knobsToShow>
    <knobToShow idToUse="inlineAttributionMode"/>
    <knobToShow idToUse="loopAttributionMode"/>
   </knobsToShow>
  </quickFilter>
  <bottomUp id="bottomUpPane" displayName="%BottomUpWindow">
   <description>%BandwidthBottomUpWindowDescription</description>
   <helpKeywordF1>configs.bottom_up_f1109</helpKeywordF1>
   <icon file="client.dat#zip:images.xrc" image="tab_grid"/>
   <errorMessage id="noData">%ErrorNoDataEBS</errorMessage>
   <rowBy>
    <vectorQueryInsert>/PMUGridRowBy</vectorQueryInsert>
    <sort>
     <queryRef>/MySorting</queryRef>
    </sort>
   </rowBy>
   <columnBy>
    <queryInherit>/MyColumns</queryInherit>
   </columnBy>
   <groupingItems>
    <queryInherit>/BottomUpGroupingItems</queryInherit>
   </groupingItems>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </bottomUp>
  <summary id="summaryPane" displayName="%SummaryWindow">
   <xsl:variable name="summarypane" select="document('config://viewpoint/include/summarypane.cfg')"/>
   <helpKeywordF1>configs.interpret_result_summary_f1024</helpKeywordF1>
   <description>%BandwidthSummaryWindowDescription</description>
   <icon file="client.dat#zip:images.xrc" image="tab_summary"/>
   <infoTree displayName="%ResultSummaryInfo" valueAlign="right">
    <headerBy>
     <queryRef>/TotalElapsedTime</queryRef>
    </headerBy>
    <metricBy>
     <queryRef>/RefTime</queryRef>
     <queryRef>/PausedTime</queryRef>
     <queryRef>/FrameCount</queryRef>
    </metricBy>
   </infoTree>
   <xsl:copy-of select="$summarypane//grid[@displayName='%AverageBandwidth']"/>
   <xsl:copy-of select="$summarypane//histogramChart[@displayName='%FrameRateChart']"/>
   <xsl:copy-of select="$summarypane//histogramChart[@displayName='%RegionDurationChart']"/>
   <xsl:variable name="summaryInfo"/>
   <xsl:variable name="summaryFileName">
    <xsl:text>config://viewpoint/include/summary.xsl?</xsl:text>
    <xsl:for-each select="exsl:node-set($summaryInfo)//@*">
     <xsl:value-of select="concat(name(), '=', .)"/>
     <xsl:text>&amp;</xsl:text>
    </xsl:for-each>
   </xsl:variable>
   <xsl:copy-of select="document($summaryFileName)"/>
  </summary>
  <timeline id="timelinePane" displayName="%TimelineWindow">
   <helpKeywordF1>configs.timeline_f1106</helpKeywordF1>
   <description>%BandwidthTimelineWindowDescription</description>
   <icon file="client.dat#zip:images.xrc" image="tab_timeline"/>
   <ruler>
    <xsl:copy-of select="$stripchartpanes//config[@id='mark']/configRulerLayers/*"/>
    <xsl:copy-of select="$stripchartpanes//config[@id='frameSimple']/configRulerLayers/*"/>
   </ruler>
   <area headerMode="rich" boolean:maxLabels="true" id="bw">
    <rowSet displayName="%Bandwidth">
     <rowBy>
      <queryRef>/UncorePackage</queryRef>
     </rowBy>
     <layer>
      <drawBy>
       <queryRef>/OvertimeBandwidth</queryRef>
      </drawBy>
     </layer>
    </rowSet>
   </area>
   <area headerMode="rich" boolean:maxLabels="true" id="read_bw">
    <rowSet displayName="%ReadBandwidth">
     <rowBy>
      <queryRef>/UncorePackage</queryRef>
     </rowBy>
     <layer>
      <drawBy>
       <queryRef>/OvertimeReadBandwidth</queryRef>
      </drawBy>
     </layer>
    </rowSet>
   </area>
   <area headerMode="rich" boolean:maxLabels="true" id="write_bw">
    <rowSet displayName="%WriteBandwidth">
     <rowBy>
      <queryRef>/UncorePackage</queryRef>
     </rowBy>
     <layer>
      <drawBy>
       <queryRef>/OvertimeWriteBandwidth</queryRef>
      </drawBy>
     </layer>
    </rowSet>
   </area>
   <xsl:copy-of select="$stripchartpanes//config[@id='frameSimple']/configAreas/*"/>
  </timeline>
  <srcAsm id="srcAsmPane">
   <asmWindow>
    <helpKeywordF1>configs.find_problem_asm_pane_f1041</helpKeywordF1>
    <rowBy>
     <vectorQueryInsert>/PMUAsmPaneRowBy</vectorQueryInsert>
    </rowBy>
    <columnBy>
     <queryRef>/PMUSourceLine</queryRef>
     <queryRef>/PMUAssemblyContent</queryRef>
     <vectorQueryInsert>/MyDataColumns</vectorQueryInsert>
     <vectorQueryInsert>/MyEventColumns</vectorQueryInsert>
    </columnBy>
    <queryMode>flatProfile</queryMode>
   </asmWindow>
   <srcWindow>
    <helpKeywordF1>configs.find_problem_src_pane_f1040</helpKeywordF1>
    <rowBy>
     <queryRef>/PMUSourceLineFlat</queryRef>
    </rowBy>
    <columnBy>
     <queryRef>/PMUSourceContent</queryRef>
     <vectorQueryInsert>/MyDataColumns</vectorQueryInsert>
     <vectorQueryInsert>/MyEventColumns</vectorQueryInsert>
    </columnBy>
    <queryMode>flatProfile</queryMode>
   </srcWindow>
   <fileSearchWindow>
    <helpKeywordF1>configs.find_file_type_f1072</helpKeywordF1>
   </fileSearchWindow>
   <doiBy>
    <queryRef>/DataOfInterest</queryRef>
   </doiBy>
  </srcAsm>
 </paneLibrary>
 <queryLibrary>
  <derivedQuery id="llcmiss" displayName="%LLCMissCountName">
   <valueType>count</valueType>
   <description>%LLCMissCountDescription</description>
  </derivedQuery>
  <rule>
   <ruleExpr>$PMU != null</ruleExpr>
   <rule>
    <ruleExpr>$PMU == snb</ruleExpr>
    <derivedQuery idToOverwrite="llcmiss">
     <valueEval>query(&quot;/PMUEventCount/PMUEventType[MEM_LOAD_UOPS_MISC_RETIRED.LLC_MISS_PS]&quot;)</valueEval>
    </derivedQuery>
   </rule>
   <rule>
    <ruleExpr>$PMU == snbep</ruleExpr>
    <ruleExpr>$PMU == ivytown</ruleExpr>
    <derivedQuery idToOverwrite="llcmiss">
     <valueEval>query(&quot;/PMUEventCount/PMUEventType[MEM_LOAD_UOPS_RETIRED.LLC_MISS]&quot;)</valueEval>
    </derivedQuery>
   </rule>
   <rule>
    <ruleExpr>$PMU == ivybridge</ruleExpr>
    <derivedQuery idToOverwrite="llcmiss">
     <valueEval>query(&quot;/PMUEventCount/PMUEventType[MEM_LOAD_UOPS_LLC_MISS_RETIRED.LOCAL_DRAM]&quot;)</valueEval>
    </derivedQuery>
   </rule>
   <rule>
    <ruleExpr>$PMU == haswell</ruleExpr>
    <ruleExpr>$PMU == crystalwell</ruleExpr>
    <derivedQuery idToOverwrite="llcmiss">
     <valueEval>query(&quot;/PMUEventCount/PMUEventType[MEM_LOAD_UOPS_L3_MISS_RETIRED.LOCAL_DRAM]&quot;)</valueEval>
    </derivedQuery>
   </rule>
  </rule>
  <derivedQuery id="llctodram" displayName="%LLCtoDRAMCountName">
   <valueType>count</valueType>
   <valueEval>query(&quot;/PMUEventCount/PMUEventType[OFFCORE_RESPONSE.ANY_REQUEST.LLC_MISS_LOCAL.DRAM_0]&quot;) + query(&quot;/PMUEventCount/PMUEventType[OFFCORE_RESPONSE.ANY_REQUEST.LLC_MISS_LOCAL.DRAM_1]&quot;)</valueEval>
   <description>%LLCtoDRAMCountDescription</description>
  </derivedQuery>
  <vectorQuery id="MyDataColumns">
   <queryRef>/RefTime</queryRef>
   <queryRef>/InstructionsRetired</queryRef>
  </vectorQuery>
  <vectorQuery id="MyEventColumns">
   <queryRef>/llcmiss</queryRef>
   <queryRef>/llctodram</queryRef>
  </vectorQuery>
  <vectorQuery id="MyColumns">
   <vectorQueryInsert>/MyDataColumns</vectorQueryInsert>
   <queryRef>/CPI</queryRef>
   <vectorQueryInsert>/MyEventColumns</vectorQueryInsert>
   <vectorQueryInsert>/FrameDataQueries</vectorQueryInsert>
   <vectorQueryInsert>/RegionDataQueries</vectorQueryInsert>
   <vectorQueryInsert>/GridInfoQueriesTail</vectorQueryInsert>
  </vectorQuery>
  <vectorQuery id="MySorting">
   <queryRef>/DataOfInterest</queryRef>
  </vectorQuery>
  <countQuery id="DataOfInterest">
   <queryInherit>/Clockticks</queryInherit>
  </countQuery>
  <infoQuery id="PMUEventTimeline" displayName="%PMUEventTimeline">
   <queryInherit>/PMUEventType</queryInherit>
  </infoQuery>
 </queryLibrary>
</bag>
